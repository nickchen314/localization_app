<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tristan and Kento">
<meta name="dcterms.date" content="2023-12-11">

<title>Vignette</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Vignette_files/libs/clipboard/clipboard.min.js"></script>
<script src="Vignette_files/libs/quarto-html/quarto.js"></script>
<script src="Vignette_files/libs/quarto-html/popper.min.js"></script>
<script src="Vignette_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Vignette_files/libs/quarto-html/anchor.min.js"></script>
<link href="Vignette_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Vignette_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Vignette_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Vignette_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Vignette_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Vignette</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Tristan and Kento </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 11, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>
<div class="cell">
<p>#Contributers</p>
<section id="data-cleaning" class="level2">
<h2 class="anchored" data-anchor-id="data-cleaning">Data Cleaning</h2>
<p>#Primary Contributor: #Co-Contributors:</p>
</section>
<section id="app-code" class="level2">
<h2 class="anchored" data-anchor-id="app-code">App Code</h2>
<p>#Primary Contributor: #Co-Contributors:</p>
</section>
<section id="documentation" class="level2">
<h2 class="anchored" data-anchor-id="documentation">Documentation:</h2>
<p>#Readme Primary Contributor:</p>
<p>#Vignette Primary Contributor: Co-Contributors:</p>
</section>
</div>
<section id="yaml-header-title-author-date-and-output-format" class="level2">
<h2 class="anchored" data-anchor-id="yaml-header-title-author-date-and-output-format">1. YAML Header: Title, Author, Date, and Output Format</h2>
<p>Title: USAID Localization App Author: Nick C, Kento H, Orion F, Tristan L. Data-413 (all members) Date: 12/8 Output Format: HTML</p>
</section>
<section id="use-case" class="level2">
<h2 class="anchored" data-anchor-id="use-case">2. Use Case</h2>
<p>Problem Addressed: The USAID Localization App is specifically designed to address the critical need for transparency and detailed analysis in the distribution of USAID funding. It focuses on a crucial aspect: quantifying and visualizing the share of funding allocated to local organizations within different countries. This need arises from USAID’s ambitious goals set in November 2021 by Administrator Samantha Power, targeting a significant shift towards localization in aid distribution.</p>
<p>Target Users: 1. Development professionals seeking insights into the effectiveness and distribution of USAID funds. 2. Academic researchers analyzing trends in international aid and its local impact. 3. Members of non-governmental organizations (NGOs), particularly those classified as local, who are interested in understanding their role and representation in receiving aid. 4. General public members, especially those interested in the workings and impacts of international aid.</p>
</section>
<section id="required-packages" class="level2">
<h2 class="anchored" data-anchor-id="required-packages">3. Required Packages</h2>
<p>The USAID Localization App, developed with R and Shiny, utilizes a range of packages to facilitate its data processing, visualization, and user interface capabilities. Below is a detailed list of the required packages along with their primary functions within the app:</p>
<ol type="1">
<li>shiny: The core framework for building interactive web applications directly from R. It provides the structure for the user interface and server components of the app.</li>
<li>tidyverse: A collection of R packages designed for data science. It includes tools for data manipulation, exploration, and visualization. Key packages from tidyverse used in the app include dplyr for data manipulation and readr for reading data files.</li>
<li>ggplot2: A system for declaratively creating graphics, based on the Grammar of Graphics. It is used for creating advanced and aesthetically pleasing visualizations within the app.</li>
<li>bslib: Provides tools for using Bootstrap in Shiny applications. It is used to apply the Bootstrap 5 ‘Materia’ theme to enhance the app’s user interface design.</li>
<li>scales: Provides methods for automatically determining break points and labels for axes and legends in ggplot2. It is particularly useful for formatting numeric labels in visualizations.</li>
<li>DT: An interface to the JavaScript library DataTables, used in Shiny apps for rendering interactive tables.</li>
<li>thematic: Provides tools for simplifying the styling of Shiny apps and R Markdown documents, especially for consistent theming in ggplot2 graphics.</li>
<li>shinyWidgets: Extends the basic set of Shiny widgets with more sophisticated and customizable input widgets.</li>
<li>plotly: An R package for creating interactive web-based graphics via the open source JavaScript graphing library Plotly.js. It is used to render interactive versions of ggplot2 graphics.</li>
</ol>
<p>Additionally, the app incorporates custom functions and data processing scripts, as indicated in the business logic section. These include reading in data from RDS files, manipulating and joining data frames, defining UI elements, and setting up reactive elements for dynamic data visualization.</p>
</section>
<section id="data-source-and-structure" class="level2">
<h2 class="anchored" data-anchor-id="data-source-and-structure">4. Data Source and Structure</h2>
<p>The default data sources are two sets of RDS files: contracts_prime and grants_prime, which contain data regarding contracts and grants respectively. These data sources are located in a directory named data-raw, as indicated by the file paths in the scripts (“./data-raw/contracts.rds” and “./data-raw/grants.rds”).</p>
<p>The general structure of the data, after processing through the func_clean_df function mentioned in app.R, is a single data frame named joined_df. This joined data frame contains variables from both the contracts and grants data sets. The exact variables included in joined_df are not fully listed in the vignette provided, but based on the operations in the scripts, we can infer some of the variables include:</p>
<ol type="1">
<li>total_obligated_amount: The financial obligation amount for the grant or contract.</li>
<li>award_base_action_date_fiscal_year: The fiscal year of the award date.</li>
<li>primary_place_of_performance_country_name: The country where the contract or grant work is performed.</li>
<li>is.local: A logical variable indicating whether the place of performance is the same as the recipient’s country.</li>
<li>is.grant: A logical variable indicating whether the record is a grant (TRUE) or a contract (FALSE).</li>
</ol>
<p>Further, the data frames undergo various transformations, such as mutating to create new variables or filtering based on user input from the Shiny application interface.</p>
<p>For exploratory data analysis, the eda.R script loads CSV files with seemingly more recent data (Contracts_PrimeAwardSummaries_2023-10-01_H04M40S14_1.csv and Assistance_PrimeAwardSummaries_2023-10-09_H17M29S35_1.csv). It then selects certain columns for analysis and joins the data frames, similarly creating a joined_df. This EDA script also introduces a variable is.local to identify whether the performance country matches the recipient country and conducts an initial count of missing values (NAs) for the is.local variable and the total_obligated_amount.</p>
</section>
<section id="eda-inputs-controls-and-outputs" class="level2">
<h2 class="anchored" data-anchor-id="eda-inputs-controls-and-outputs">5. EDA Inputs, Controls, and Outputs</h2>
<p>We have a few inputs, such as the country (you can select more than 1), the a year range slider, a minimum award value, the type of grants (you can select more than 1), aggregate countries so you can put the graphs of the countries together or separate. Lets imagine you want to know the number of projects for awards for Albania and Algeria for both contracts and grants from 2003 to 2023, without a minimum award value in one two tables side by side. You will go to the Search a Country drop down menu and select Albania and Algeria, drag the year rang slider from to 2003, go to the What type(s) of awards and both should already be selected.</p>
<p><img src="images/Image%2012-12-23%20at%2010.04%20AM.jpg" width="418" height="397"></p>
<p>On the Count of Projects tab there should be four graphs:</p>
<p>2 for the Count of USAID Projects by Localization Status and Count of Projects</p>
<p>2 for the Proportion of Projects by Localization Status and Proportion of Projects</p>
<p><img src="images/Image%2012-12-23%20at%2010.04%20AM%20(1).jpg" class="img-fluid"></p>
<p>If you go to the Dollar Value Projects Tab you will also have four graphs but this time the top graphs are by Dollar Value of Projects instead of Count of Projects. You will have</p>
<p>2 Obligations of USAID Projects by Localization Status graphs</p>
<p>2 Proportion of Project Obligations by Localization Status graphs</p>
<p><img src="images/Image%2012-12-23%20at%2010.05%20AM%202.jpg" class="img-fluid"></p>
<p>On the Data Table Tab there is a large data table that has already been filtered by your inputs and you can download the table with our download table button and from there you can do any number of tests</p>
<p><img src="images/Image%2012-12-23%20at%2010.05%20AM.jpg" class="img-fluid"></p>
</section>
<section id="statistical-analysis-inputs-controls-and-outputs" class="level2">
<h2 class="anchored" data-anchor-id="statistical-analysis-inputs-controls-and-outputs">6. Statistical Analysis Inputs, Controls, and Outputs</h2>
<p>Lets imagine you want to know the number of projects for awards for Albania and Algeria for both contracts and grants from 2003 to 2023, without a minimum award value in one two tables side by side. Pretty much the same as 5. You will go to the Search a Country drop down menu and select Albania and Algeria, drag the year rang slider from to 2003, go to the What type(s) of awards and both should already be selected. All these pictures and tables above give a good representation of the data in a visual format. From the data set that we downloaded from problem 5 we have the ability to perform any test we want on it</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>example_dataset <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"../data/usaid_localization_data.csv"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(example_dataset)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> contract_award_unique_key award_id_piid      total_obligated_amount
 Length:181                Length:181         Min.   :       0      
 Class :character          Class :character   1st Qu.:   10788      
 Mode  :character          Mode  :character   Median :   43758      
                                              Mean   : 1169195      
                                              3rd Qu.:  353907      
                                              Max.   :19272484      
                                                                    
 total_outlayed_amount period_of_performance_start_date
 Min.   : -60416       Length:181                      
 1st Qu.:    887       Class :character                
 Median :  39483       Mode  :character                
 Mean   : 613803                                       
 3rd Qu.: 607325                                       
 Max.   :5850679                                       
 NA's   :139                                           
 period_of_performance_current_end_date recipient_name    
 Length:181                             Length:181        
 Class :character                       Class :character  
 Mode  :character                       Mode  :character  
                                                          
                                                          
                                                          
                                                          
 prime_award_base_transaction_description recipient_uei     
 Length:181                               Length:181        
 Class :character                         Class :character  
 Mode  :character                         Mode  :character  
                                                            
                                                            
                                                            
                                                            
 recipient_parent_name recipient_country_code recipient_parent_uei
 Length:181            Length:181             Length:181          
 Class :character      Class :character       Class :character    
 Mode  :character      Mode  :character       Mode  :character    
                                                                  
                                                                  
                                                                  
                                                                  
 awarding_office_code awarding_office_name
 Length:181           Length:181          
 Class :character     Class :character    
 Mode  :character     Mode  :character    
                                          
                                          
                                          
                                          
 primary_place_of_performance_country_code award_base_action_date_fiscal_year
 Length:181                                Min.   :2005                      
 Class :character                          1st Qu.:2009                      
 Mode  :character                          Median :2011                      
                                           Mean   :2012                      
                                           3rd Qu.:2016                      
                                           Max.   :2023                      
                                                                             
   is.grant           is.local        
 Length:181         Length:181        
 Class :character   Class :character  
 Mode  :character   Mode  :character  
                                      
                                      
                                      
                                      
 primary_place_of_performance_country_name recipient_country_name
 Length:181                                Length:181            
 Class :character                          Class :character      
 Mode  :character                          Mode  :character      
                                                                 
                                                                 
                                                                 
                                                                 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(example_dataset<span class="sc">$</span>total_obligated_amount)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 211624295</code></pre>
</div>
</div>
<p>Now we have a full statistical view of any column we want or a sum of the money. It is yours to manipulate and explore!</p>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">7 References</h2>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>